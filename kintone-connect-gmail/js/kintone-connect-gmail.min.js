(function(e,t,n){"use strict";if(null!==t){var i,s;s={lang:{en:{button:{signInGmail:"Sign In to Gmail",signOut:"Sign Out of Gmail",getMail:"Receive Emails",sendMail:"Send email"},message:{success:{sendMail:"Your email has been sent successfully."},error:{occurred:"Error occurred.",invalidEmail:"Invalid email address format.",mailSizeLarge:"The email size exceeds the maximum of {{maxFileSize}}MB.",recordNotFound:"Record was not found!",emailHasSend:"This email has been send with message ID: {{messageID}}",unsupportExtension:'The "{{fileName}}" file is not supported to sending email. The ".{{fileExt}}" extension is blocked on Gmail.'}}},ja:{button:{signInGmail:"Gmailにログイン",signOut:"Gmailからログアウト",getMail:"メールを受信",sendMail:"送信する"},message:{success:{sendMail:"メールの送信に成功しました。"},error:{occurred:"エラー",invalidEmail:"メールアドレスの形式が正しくありません。",mailSizeLarge:"メールサイズが上限（{{maxFileSize}}MB）を超えています。 ",recordNotFound:"レコードが見つかりませんでした！",emailHasSend:"このメールはメッセージID: {{messageID}}で送信されました",unsupportExtension:"「{{fileName}}」ファイルはメールの送信に対応していません. Gmailでは「.{{fileExt}}」の拡張子がブロックされています。"}}}},setting:{lang:"en",i18n:{},app:{appClientID:"",fieldsCode:{attachment:"attachment",bcc:"bcc",cc:"cc",content:"message",dateTime:"Date_and_time",from:"from",labels:"labels_id",mailAccount:"email_account",messageID:"message_id",owner:"owner",subject:"subject",threadID:"thread_id",to:"to"}},extensionProhibited:["ADE","ADP","BAT","CHM","CMD","COM","CPL","DLL","DMG","EXE","HTA","INS","ISP","JAR","JS","JSE","LIB","LNK","MDE","MSC","MSI","MSP","MST","NSH","PIF","SCR","SCT","SHB","SYS","VB","VBE","VBS","VXD","WSC","WSF","WSH"],gAPI:{labelIdsForGet:["INBOX","SENT"],maxMessagesForGet:45,maxEmailSize:5242880},ui:{buttons:{signInGmail:{id:"kintoneCustomizeBtnSignInGmail",text:"signInGmail"},signOut:{id:"kintoneCustomizeBtnSignOut",text:"signOut"},getMail:{id:"kintoneCustomizeBtnGetMail",text:"getMail"},sendMail:{id:"kintoneCustomizeBtnSendMail",text:"sendMail"}},label:{userInfo:{}}}},data:{ui:{},mail:{}},error:[],init:function(){var e=this;this.setting.lang=kintone.getLoginUser().language||"en",this.setting.i18n=this.setting.lang in this.lang?this.lang[this.setting.lang]:this.lang.en,t.kintoneListenEvent(["app.record.index.edit.show","app.record.edit.show","app.record.create.show"],"disableAndResetField",this),t.kintoneListenEvent(["app.record.index.show","app.record.detail.show"],"kintoneEventListener",this),document.addEventListener("click",function(t){e.handleEventClick(t)})},disableAndResetField:function(e){return e.record[this.setting.app.fieldsCode.from].disabled=!0,"app.record.create.show"===e.type&&(e.record[this.setting.app.fieldsCode.from].value="",e.record[this.setting.app.fieldsCode.threadID].value="",e.record[this.setting.app.fieldsCode.labels].value="",e.record[this.setting.app.fieldsCode.mailAccount].value="",e.record[this.setting.app.fieldsCode.messageID].value="",e.record[this.setting.app.fieldsCode.owner].value=[{code:kintone.getLoginUser().code}]),e},kintoneEventListener:function(e){var n=!1;switch(e.type){case"app.record.index.show":n=this.eventOnIndexShow(e);break;case"app.record.detail.show":n=this.eventOnDetailShow(e)}if(n===!0){t.ui.element(this.data.ui.kintoneCustomizeGmailHeaderSigned).append(this.data.ui.btnSignOut);var s=this;i.init(function(e){s.updateSigninStatus(e)})}},eventOnIndexShow:function(e){if(!this.hasInitUIIndex())return this.uiCreate(kintone.app.getHeaderSpaceElement()),this.data.ui.btnGetmail=t.ui.createButton(this.setting.ui.buttons.getMail,this.setting.i18n.button),t.ui.element(this.data.ui.kintoneCustomizeGmailHeaderSigned).append(this.data.ui.btnGetmail),!0},eventOnDetailShow:function(e){return!this.hasInitUIDetail()&&(this.uiCreate(kintone.app.record.getHeaderMenuSpaceElement()),this.data.ui.btnSendmail=t.ui.createButton(this.setting.ui.buttons.sendMail,this.setting.i18n.button),t.ui.element(this.data.ui.kintoneCustomizeGmailHeaderSigned).append(this.data.ui.btnSendmail),!0)},hasInitUIIndex:function(){return document.getElementById(this.setting.ui.buttons.signInGmail.id)},hasInitUIDetail:function(){return document.getElementById(this.setting.ui.buttons.sendMail.id)},uiCreate:function(e){var n=document.createElement("div");this.data.ui.kintoneCustomizeGmailHeaderSigned=document.createElement("div"),this.data.ui.kintoneCustomizeGmailHeaderNotSigned=document.createElement("div"),this.data.ui.kintoneCustomizeGmailUserInfo=document.createElement("div"),this.data.ui.btnSignIn=t.ui.createButton(this.setting.ui.buttons.signInGmail,this.setting.i18n.button),this.data.ui.btnSignOut=t.ui.createButton(this.setting.ui.buttons.signOut,this.setting.i18n.button),this.data.ui.kintoneCustomizeGmailUserInfo=document.createElement("div"),this.data.ui.kintoneCustomizeGmailHeaderSigned.style.display="none",n.className="kintoneCustomizeGmailUIHeader",this.data.ui.kintoneCustomizeGmailUserInfo.className="kintoneCustomizeGmailUIUserInfo",t.ui.element(this.data.ui.kintoneCustomizeGmailHeaderNotSigned).append(this.data.ui.btnSignIn).appendTo(n).appendTo(e),t.ui.element(this.data.ui.kintoneCustomizeGmailHeaderSigned).append(this.data.ui.kintoneCustomizeGmailUserInfo).appendTo(n).appendTo(e)},handleEventClick:function(e){var n=this.elementFnc(e.target)||this.elementFnc(e.srcElement),s=n.getId();switch(s){case this.setting.ui.buttons.signOut.id:return void i.auth.signOut();case this.setting.ui.buttons.signInGmail.id:t.ui.loading.show(),i.auth.signIn();break;case this.setting.ui.buttons.getMail.id:t.ui.loading.show(),this.initGetMail();break;case this.setting.ui.buttons.sendMail.id:var a=kintone.app.record.getId();if(null===a||a<1)return void t.alertMessage(this.setting.i18n.message.error.occurred,"error");t.ui.loading.show(),this.initSendMail(a);break;default:return!1}},elementFnc:function(e){return{getId:function(){return e.id},getData:function(t){return e.getAttribute("data-"+t)},hasClass:function(t){return e.className.split(" ").indexOf(t)!==-1},on:function(t,n){return e.addEventListener(t,n),this},remove:function(){e.remove()},clear:function(){e.innerHTML=""}}},updateSigninStatus:function(e){var n=this;return t.ui.loading.show(),e?n.getUserProfile().then(function(e){n.data.mail.profile=e,n.data.ui.kintoneCustomizeGmailUserInfo.innerHTML=n.data.mail.profile.emailAddress}).then(function(){n.data.ui.kintoneCustomizeGmailHeaderNotSigned.style.display="none",n.data.ui.kintoneCustomizeGmailHeaderSigned.style.display="inline-block",t.ui.loading.hide()}):(n.data.ui.kintoneCustomizeGmailHeaderNotSigned.style.display="inline-block",n.data.ui.kintoneCustomizeGmailHeaderSigned.style.display="none",void t.ui.loading.hide())},getUserProfile:function(){t.ui.loading.show();var e={userId:"me"};return i.user(e).profile()},initGetMail:function(){var e=this;t.ui.loading.show(),this.getMessageListFromGmail(e.setting.gAPI.labelIdsForGet).then(function(n){return n&&0!==n.length?(e.data.emailMessages=n.reverse(),e.putMailToKintoneApp().then(function(){window.location.reload(),t.ui.loading.hide()}).catch(function(e){window.console.error(e),t.ui.loading.hide()})):void t.ui.loading.hide()}).catch(function(e){window.console.error(e),t.ui.loading.hide()})},getMessageListFromGmail:function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.gmail("me").getAll([e]))}),kintone.Promise.all(n).then(function(e){var t=[];return e.forEach(function(e){e.forEach(function(e){if(e){var n=t.filter(function(t){return t.id===e.id});0===n.length&&t.push(e)}})}),0===t.length?null:t})},putMailToKintoneApp:function(){function e(e){return n.gmail("me").getMessageByID(e).then(function(e){return e===!1?(t.alertMessage(n.setting.i18n.message.error.occurred),!1):n.addMailIntoKintone(e.mailInfo,e.headers,e.body,e.files)})}var n=this;return n.getExitsMessageIdsOnkintone().then(function(t){var i=n.data.emailMessages.filter(function(e){return t.indexOf(e.id)===-1}).slice(0,n.setting.gAPI.maxMessagesForGet),s=[];return i.forEach(function(t){s.push(e(t.id))}),kintone.Promise.all(s)})},getExitsMessageIdsOnkintone:function(){function e(i){var r=i;return n.query="limit "+a+" offset "+r,t.apiRequest("records","GET",n).then(function(t){return t.records&&t.records.length>0&&(s=s.concat(t.records)),0!==t.records.length?(r+=a,e(r)):s})}var n={app:kintone.app.getId(),fields:[this.setting.app.fieldsCode.messageID],totalCount:!0},i=this,s=[],a=500;return e(0).then(function(e){return e.map(function(e){return e[i.setting.app.fieldsCode.messageID].value})})},getLabelsStringForStorage:function(e){var t=this;return e.filter(function(e){return t.setting.gAPI.labelIdsForGet.indexOf(e)>-1}).join(", ")},removeStyleTagOnString:function(e){return e.replace(/<style.*style>|<style.*[[\s\S\t]*?.*style>/gm,"")},addMailIntoKintone:function(e,n,i,s){var a={};a[this.setting.app.fieldsCode.subject]={value:n.subject},a[this.setting.app.fieldsCode.from]={value:n.from},a[this.setting.app.fieldsCode.to]={value:n.to},a[this.setting.app.fieldsCode.cc]={value:n.cc||""},a[this.setting.app.fieldsCode.bcc]={value:n.bcc||""};var r=this.removeStyleTagOnString(i);a[this.setting.app.fieldsCode.content]={value:r},a[this.setting.app.fieldsCode.dateTime]={value:new Date(parseInt(e.date,10)).toISOString()},a[this.setting.app.fieldsCode.threadID]={value:e.threadId},a[this.setting.app.fieldsCode.messageID]={value:e.id},a[this.setting.app.fieldsCode.labels]={value:this.getLabelsStringForStorage(e.labelIds)},a[this.setting.app.fieldsCode.mailAccount]={value:this.data.mail.profile.emailAddress},a[this.setting.app.fieldsCode.owner]={value:[{code:kintone.getLoginUser().code,type:"USER"}]};var o=this;return"undefined"!=typeof s&&s.length>0?this.uploadFileToKintone(e.messageID,s,0,[]).then(function(e){return a[o.setting.app.fieldsCode.attachment]={value:e},o.addNewRecord(a)}).catch(function(e){t.alertMessage(o.setting.i18n.message.error.occurred),window.console.error(e)}):o.addNewRecord(a)},addNewRecord:function(e){return t.apiRequest("record","POST",{app:kintone.app.getId(),record:e})},uploadFileToKintone:function(e,n,i,s){var a=this,r=n[i];return this.gmail("me").getAttachmentByID(e,r.body.attachmentId).then(function(e){var n=new FormData,i=a.base64AttachmentToBlob(e.data,r.mimeType);return n.append("__REQUEST_TOKEN__",kintone.getRequestToken()),n.append("file",i,r.filename),t.formRequest(kintone.api.url("/k/v1/file"),"POST",n)}).then(function(t){return s.push(window.JSON.parse(t.response)),i+1<n.length?a.uploadFileToKintone(e,n,i+1,s):s})},base64AttachmentToBlob:function(e,t){for(var n=i.attachmentDecode(e),s=n.length,a=new ArrayBuffer(s),r=new Uint8Array(a),o=0;o<s;o++)r[o]=n.charCodeAt(o);var u=new Blob([a],{type:(t||"octet/stream")+";charset=utf-8;"});return u},initSendMail:function(e){var n=this;return this.kintoneGetRecordData(e).then(function(e){return n.parseRecordDataToEmailData(e)}).then(function(e){var t=n.mineMessage(e),i=!1,s=n.byteOfString(t);return"undefined"!=typeof e.attachment&&e.attachment.constructor===Array&&e.attachment.length>0&&(i=!0,e.attachment.forEach(function(e){var t=n.getFileExtension(e.name);n.setting.extensionProhibited.indexOf(t)>=0&&n.stopProcessWithMessage(n.setting.i18n.message.error.unsupportExtension.replace("{{fileName}}",e.name).replace("{{fileExt}}",t)),s+=parseInt(e.size,10),s-=n.byteOfString(e.fileKey),s+=n.byteOfString(e.name+"\r\n\r\n\r\n\r\n")})),n.isValidFileSize(s)||n.stopProcessWithMessage(n.setting.i18n.message.error.mailSizeLarge.replace("{{maxFileSize}}",n.convertByteSize(n.setting.gAPI.maxEmailSize,"MB"))),i===!1?t:n.kintoneGetAttachments(e.attachment).then(function(e){return e.forEach(function(e){t=t.replace('"'+e.fileKey+'"','"'+e.name+'"\r\n\r\n'+e.contentBytes+"\r\n\r\n")}),t})}).then(function(e){return n.gmail("me").send(e)}).then(function(i){var s={};return s[n.setting.app.fieldsCode.messageID]={value:i.id},s[n.setting.app.fieldsCode.threadID]={value:i.threadId},s[n.setting.app.fieldsCode.labels]={value:i.labelIds?i.labelIds.join(","):""},s[n.setting.app.fieldsCode.mailAccount]={value:n.data.mail.profile.emailAddress},s[n.setting.app.fieldsCode.owner]={value:[{code:kintone.getLoginUser().code,type:"USER"}]},s[n.setting.app.fieldsCode.from]={value:n.data.mail.profile.emailAddress},t.apiRequest("record","PUT",{app:kintone.app.getId(),id:e,record:s})}).then(function(e){t.alertMessage(n.setting.i18n.message.success.sendMail,"success"),t.ui.loading.hide()}).catch(function(e){t.showError(e)})},kintoneGetRecordData:function(e){var n=this;return t.apiRequest("records","GET",{app:kintone.app.getId(),fields:t.objectValueToArray(n.setting.app.fieldsCode),query:"$id = "+e}).then(function(e){if("undefined"==typeof e.records||0===e.records.length)throw new Error(this.setting.i18n.message.error.recordNotFound);return e.records[0]})},parseRecordDataToEmailData:function(e){var t={};for(var n in this.setting.app.fieldsCode){var i=this.setting.app.fieldsCode[n];e.hasOwnProperty(i)&&(t[n]=e[i].value)}return t.from=this.data.mail.profile.emailAddress,t},kintoneGetAttachments:function(e){for(var n=[],i=0;i<e.length;i++)n.push(this.kintoneGetAttachment(e[i]));return kintone.Promise.all(n).catch(function(e){t.showError(e)})},kintoneGetAttachment:function(e){var n=this,i="/k/v1/file.json?fileKey="+e.fileKey;return new kintone.Promise(function(t,s){var a=new XMLHttpRequest;a.open("GET",i,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.responseType="arraybuffer",a.onload=function(){e.contentBytes=n.arraybufferToBase64(this.response),t(e)},a.onerror=function(e){s(e)},a.send()}).then({},function(e){return t.showError(e),!1})},arraybufferToBase64:function(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,s=0;s<i;s++)t+=String.fromCharCode(n[s]);return window.btoa(t)},mineMessage:function(e){var t="kintoneBoundaryData",n=[];return n.push('Content-Type: multipart/mixed; charset="UTF-8"; boundary="'+t+'"\r\n'),n.push("MIME-Version: 1.0\r\n"),"undefined"!=typeof e.from&&""!==e.from&&n.push("From: "+this.encodeSender(e.from)+"\r\n"),"undefined"!=typeof e.to&&""!==e.to&&n.push("To: "+this.encodeSender(e.to)+"\r\n"),"undefined"!=typeof e.cc&&""!==e.cc&&n.push("Cc: "+this.encodeSender(e.cc)+"\r\n"),"undefined"!=typeof e.bcc&&""!==e.bcc&&n.push("Bcc: "+this.encodeSender(e.bcc)+"\r\n"),"undefined"!=typeof e.subject&&""!==e.subject&&n.push("Subject: "+this.encodeUTF8(e.subject)+"\r\n\r\n"),"undefined"!=typeof e.content&&""!==e.content&&(n.push("--"+t+"\r\n"),n.push('Content-Type: text/html; charset="UTF-8"\r\n'),n.push("MIME-Version: 1.0\r\n"),n.push("Content-Transfer-Encoding: 8bit\r\n\r\n"),n.push(e.content+"\r\n\r\n")),"undefined"!=typeof e.attachment&&e.attachment.constructor===Array&&0!==e.attachment.length&&e.attachment.forEach(function(e){n.push("--"+t+"\r\n"),n.push("Content-Type: "+e.contentType+"\r\n"),n.push("MIME-Version: 1.0\r\n"),n.push("Content-Transfer-Encoding: base64\r\n"),n.push('Content-Disposition: attachment; filename="'+e.fileKey+'"')}),n.push("--"+t+"--"),n.join("")},encodeSender:function(e){var t=this,n=String(e).trim().split(","),i=[];return n.forEach(function(n){var s=new RegExp(/(.*)<(.*)>/),a=s.exec(n.trim()),r="",o="";null!==a&&3===a.length?(o=this.encodeUTF8(a[1])+" <"+a[2]+">",r=a[2]):(o=n,r=n),""===r&&this.stopProcessWithMessage(t.setting.i18n.message.error.invalidEmail+" ("+e+")"),this.isValidEmail(r)||this.stopProcessWithMessage(t.setting.i18n.message.error.invalidEmail+" ("+r+")"),i.push(o)},this),i.join(",")},isValidEmail:function(e){var t=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;return t.test(String(e).toLowerCase())},isValidFileSize:function(e){return this.setting.gAPI.maxEmailSize>=e},encodeUTF8:function(e){return"=?UTF-8?B?"+this.stringToBase64(e)+"?="},stringToBase64:function(e){return window.btoa(unescape(encodeURIComponent(e)))},encodeURI:function(e){return this.stringToBase64(e).replace(/\//g,"_").replace(/\+/g,"-")},byteOfString:function(e){return encodeURI(e).split(/%..|./).length-1},getFileExtension:function(e){if(e){var t=e.split(".");return String(t[t.length-1]).toUpperCase()}},stopProcessWithMessage:function(e){throw t.alertMessage({header:this.setting.i18n.message.error.occurred,messages:[e]}),new Error(e)},convertByteSize:function(e,t){switch(t){case"KB":return e/1024;case"MB":return e/1024/1024;case"GB":return e/1024/1024/1024;case"TB":return e/1024/1024/1024/1024;default:return NaN}}},s.gmail=function(e){return{getMessageByID:function(t){return i.messages({userId:e,id:t}).get().then(function(e){if(e===!1)return!1;var t=i.parse(e.payload);return{headers:t.headers(["From","To","Cc","Bcc","Subject"]),body:t.body(),files:t.files(),mailInfo:{id:e.id,threadId:e.threadId,labelIds:e.labelIds,date:e.internalDate}}})},get:function(t,n,s){var a={userId:e,maxResults:t||100,q:s||""};return n&&n.length>0&&(a.labelIds=n),i.messages(a).list(n).then(function(e){return e.messages&&0!==e.messages.length?e.messages:null})},getAll:function(t,n){var s={userId:e,maxResults:9999,q:n};return t&&t.length>0&&(s.labelIds=t),new kintone.Promise(function(t,a){try{i.messages(s).listAll(e,n,function(e){t(e)})}catch(e){a(e)}})},getAttachmentByID:function(t,n){return i.messages().getAttachmentByID(e,t,n)},send:function(t){return i.messages({userId:e,resource:{raw:s.encodeURI(t)}}).send()}}},i={CONST:{CLIENT_ID:s.setting.app.appClientID,DISCOVERY_DOCS:["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],SCOPES:"https://mail.google.com/"},init:function(e){t.ui.loading.show(),n.load("client:auth2",function(s){return n.client.init({discoveryDocs:i.CONST.DISCOVERY_DOCS,clientId:i.CONST.CLIENT_ID,scope:i.CONST.SCOPES}).then(function(){n.auth2.getAuthInstance().isSignedIn.listen(function(t){e(t)}),e(n.auth2.getAuthInstance().isSignedIn.get())}).then(function(){t.ui.loading.hide()}).catch(function(e){t.showError(e),t.ui.loading.hide()})})},auth:{signIn:function(){n.auth2.getAuthInstance().signIn().catch(function(){t.ui.loading.hide()})},signOut:function(){n.auth2.getAuthInstance().signOut()}},messages:function(e){return{get:function(){return n.client.gmail.users.messages.get(e).then(function(e){return i.handleError(e)}).catch(function(e){return i.handleError(e)})},list:function(){return n.client.gmail.users.messages.list(e).then(function(e){return i.handleError(e)}).catch(function(e){return i.handleError(e)})},listAll:function(t,i,s){var a=function(t,i){t.execute(function(t){var r=i.concat(t.messages),o=t.nextPageToken;if(o){e.pageToken=o;var u=n.client.gmail.users.messages.list(e);a(u,r)}else s(r)})},r=n.client.gmail.users.messages.list(e);a(r,[])},send:function(t,s){return new kintone.Promise(function(t,s){var a=n.client.gmail.users.messages.send(e);try{a.execute(function(e){t(i.handleError(e))})}catch(e){s(e)}})},getAttachmentByID:function(e,t,s){return new kintone.Promise(function(a,r){var o=n.client.gmail.users.messages.attachments.get({id:s,messageId:t,userId:e});try{o.execute(function(e){a(i.handleError(e))})}catch(e){r(e)}})}}},labels:function(e){return{list:function(){return n.client.gmail.users.labels.list(e).then(function(e){var t=e.result.labels;return!!(t&&t.length>0)&&t}).catch(function(e){return i.handleError(e)})}}},user:function(e){return{profile:function(){return n.client.gmail.users.getProfile(e).then(function(e){return i.handleError(e)}).catch(function(e){return i.handleError(e)})}}},parse:function(e){return{headers:function(t){var n={};if(!t||t.constructor!==Array)return n;for(var i=0;i<e.headers.length;i++)t.indexOf(e.headers[i].name)!==-1&&(n[e.headers[i].name.toLowerCase()]=e.headers[i].value);return n},body:function(){function t(e){for(var n="",i=0;i<e.length;i++){var s=e[i];if(s.parts)return t(s.parts);if(n=s.body.data,"text/html"===s.mineType)return n}return n}return e.parts?i.bodyDecode(t(e.parts)):e.snippet||""},files:function(){function t(e){e.forEach(function(e){return e.parts?t(e.parts):void(""!==e.filename&&e.body.attachmentId&&n.push(e))})}var n=[];return e.parts?(t(e.parts),n):n}}},handleError:function(e){if(e&&"undefined"==typeof e.status&&"undefined"==typeof e.error)return e;var n=e.error?e.error.code:e.status;switch(n){case 200:return e.result?e.result:e;case 401:i.auth.signOut()}var a=[];throw e.error?a.push(n+": "+e.error.message):e.result?a.push(n+": "+e.result.error.message):a.push(e),t.alertMessage({header:s.setting.i18n.message.error.occurred,messages:a},"error"),t.ui.loading.hide(),new Error(a.join())},attachmentDecode:function(e){return atob(e.replace(/-/g,"+").replace(/_/g,"/"))},bodyDecode:function(e){return e?decodeURIComponent(escape(atob(e.replace(/-/g,"+").replace(/_/g,"/")))):""}},s.init()}})(kintone.$PLUGIN_ID,window.kintoneCustomize||null,window.gapi);